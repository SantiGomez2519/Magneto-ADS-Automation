{% extends 'base.html' %}
{% load static %}

{% block content %}

<title>Edit Campaign</title>

<body class="bg-gray-50">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-200 p-4">
            <a href="{% url 'add' %}" class="block w-full text-center bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded mb-4">
                Create New Campaign
            </a>
            <nav class="space-y-1">
                <a href="{% url 'campaign_list' %}" class="flex items-center p-2 rounded hover:bg-green-50">All Campaigns</a>
                <a href="#" class="flex items-center p-2 rounded hover:bg-green-50">Drafts</a>
                <a href="{% url 'campaign_list' %}" class="flex items-center p-2 rounded hover:bg-green-50">Scheduled</a>
                <a href="#" class="flex items-center p-2 rounded hover:bg-green-50">Performance Metrics</a>
            </nav>
        </aside>

        <!-- Main content -->
        <main class="flex-1 flex flex-col">
            <nav class="flex items-center justify-between bg-white px-6 py-4 shadow">
                <div>
                    <a href="#" class="mr-4 font-bold text-xl text-gray-700">Dashboard</a>
                    <a href="{% url 'add' %}" class="mr-4 text-gray-600 hover:text-gray-800">Ad Campaigns</a>
                    <a href="#" class="mr-4 text-gray-600 hover:text-gray-800">Analytics</a>
                    <a href="#" class="mr-4 text-gray-600 hover:text-gray-800">Settings</a>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="text-gray-600 hover:text-gray-800">Logout</button>
                    <img src="https://tecdn.b-cdn.net/img/new/avatars/2.jpg" class="h-8 w-8 rounded-full" alt="User Avatar"/>
                </div>
            </nav>

            <div class="flex-1 p-6">
                <h1 class="text-3xl font-bold mb-4 text-center">Edit Campaign</h1>
                <div class="max-w-2xl mx-auto bg-white rounded shadow p-6">
                    <form action="{% url 'edit_campaign' campaign.id %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}

                        <div class="mb-4">
                            <label for="name" class="block text-gray-700 font-semibold mb-2">Campaign Name</label>
                            <input type="text" name="name" id="name" value="{{ campaign.name }}" class="w-full border border-gray-300 rounded p-2">
                        </div>

                        <div class="mb-4">
                            <label for="description" class="block text-gray-700 font-semibold mb-2">Campaign Description</label>
                            <textarea name="description" id="description" class="w-full border border-gray-300 rounded p-2" rows="4">{{ campaign.description }}</textarea>
                        </div>

                        <div class="mb-4">
                            <label for="image" class="block text-gray-700 font-semibold mb-2">Campaign Image</label>
                            {% if campaign.image %}
                                <img src="{{ campaign.image.url }}" alt="{{ campaign.name }}" class="h-16 w-16 object-cover rounded mb-2">
                            {% endif %}
                            <input type="file" name="image" id="image" class="w-full">
                        </div>

                        <div class="mb-4">
                            <label for="schedule" class="block text-gray-700 font-semibold mb-2">Schedule</label>
                            <input type="date" name="schedule" id="schedule" value="{{ campaign.schedule|date:'Y-m-d' }}" class="w-full border border-gray-300 rounded p-2">
                        </div>

                        <div class="mb-4">
                            <label for="end_schedule" class="block text-gray-700 font-semibold mb-2">End Schedule</label>
                            <input type="date" name="end_schedule" id="end_schedule" value="{{ campaign.end_schedule|date:'Y-m-d' }}" class="w-full border border-gray-300 rounded p-2">
                        </div>

                        <div class="mb-4">
                            <label for="category" class="block text-gray-700 font-semibold mb-2">Category</label>
                            <select name="category" id="category" class="w-full border border-gray-300 rounded p-2">
                                <option value="" disabled>Select category</option>
                                {% for code, label in campaign.CATEGORY_CHOICES %}
                                <option value="{{ code }}" {% if campaign.category == code %}selected{% endif %}>{{ label }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-4">
                            <label for="education_level" class="block text-gray-700 font-semibold mb-2">Education Level</label>
                            <select name="education_level" id="education_level" class="w-full border border-gray-300 rounded p-2">
                                <option value="" disabled>Select education level</option>
                                {% for code, label in campaign.EDUCATION_LEVEL_CHOICES %}
                                <option value="{{ code }}" {% if campaign.education_level == code %}selected{% endif %}>{{ label }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-4">
                            <label for="modality" class="block text-gray-700 font-semibold mb-2">Modality</label>
                            <select name="modality" id="modality" class="w-full border border-gray-300 rounded p-2">
                                <option value="" disabled>Select modality</option>
                                {% for code, label in campaign.MODALITY_CHOICES %}
                                <option value="{{ code }}" {% if campaign.modality == code %}selected{% endif %}>{{ label }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-4">
                            <label for="location" class="block text-gray-700 font-semibold mb-2">Location</label>
                            <select name="location" id="location" class="w-full border border-gray-300 rounded p-2">
                                <option value="" disabled>Select location</option>
                                {% for code, label in campaign.LOCATION_CHOICES %}
                                <option value="{{ code }}" {% if campaign.location == code %}selected{% endif %}>{{ label }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-4">
                            <label for="experience" class="block text-gray-700 font-semibold mb-2">Experience</label>
                            <select name="experience" id="experience" class="w-full border border-gray-300 rounded p-2">
                                <option value="" disabled>Select experience</option>
                                {% for code, label in campaign.EXPERIENCE_CHOICES %}
                                <option value="{{ code }}" {% if campaign.experience == code %}selected{% endif %}>{{ label }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-4">
                            <label class="block text-gray-700 font-semibold mb-2">Platforms</label>
                            <div class="space-y-2">
                                <div class="flex items-center">
                                    <input type="checkbox" name="platforms" value="GOOGLE" id="google" 
                                           {% if campaign.platform1 == 'GOOGLE' %}checked{% endif %}
                                           class="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded">
                                    <label for="google" class="ml-2 block text-sm text-gray-900">Google</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" name="platforms" value="FACEBOOK" id="facebook"
                                           {% if campaign.platform2 == 'FACEBOOK' %}checked{% endif %}
                                           class="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded">
                                    <label for="facebook" class="ml-2 block text-sm text-gray-900">Facebook</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" name="platforms" value="INSTAGRAM" id="instagram"
                                           {% if campaign.platform3 == 'INSTAGRAM' %}checked{% endif %}
                                           class="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded">
                                    <label for="instagram" class="ml-2 block text-sm text-gray-900">Instagram</label>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-between">
                            <a href="{% url 'campaign_list' %}" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded">
                                Cancel
                            </a>
                            <button type="submit" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded">
                                Update Campaign
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>
</body>
{% endblock %}
